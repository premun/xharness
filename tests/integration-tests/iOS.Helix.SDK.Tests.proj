<Project DefaultTargets="Test">
  <Import Sdk="Microsoft.DotNet.Helix.Sdk" Project="Sdk.props"/>

  <PropertyGroup>
    <HelixType>test/product/</HelixType>
    <IncludeDotNetCli>true</IncludeDotNetCli>
    <DotNetCliPackageType>sdk</DotNetCliPackageType>
    <TestRunNamePrefix>$(AGENT_JOBNAME)</TestRunNamePrefix>
    <EnableXUnitReporter>true</EnableXUnitReporter>
    <EnableAzurePipelinesReporter>false</EnableAzurePipelinesReporter> <!-- TODO: false -->
    <HelixBaseUri>https://helix.dot.net</HelixBaseUri>
    <MicrosoftDotNetXHarnessCLIVersion>1.0.0-ci</MicrosoftDotNetXHarnessCLIVersion>
    <_XHarnessRunnerPackageFeed>$HELIX_CORRELATION_PAYLOAD</_XHarnessRunnerPackageFeed> <!-- We will include the .nupkg in the payload -->
  </PropertyGroup>

  <!-- New Test Projects which build app bundles to run through XHarness/XHarness go here -->
  <ItemGroup>
    <XHarnessiOSProject Include="$(MSBuildThisFileDirectory)\iOS.AppBundle.proj" />
  </ItemGroup>

  <ItemGroup Condition=" '$(HelixAccessToken)' != '' ">
    <HelixTargetQueue Include="osx.1015.amd64"/>
  </ItemGroup>

  <ItemGroup Condition=" '$(HelixAccessToken)' == '' ">
    <HelixTargetQueue Include="osx.1015.amd64.open"/>
  </ItemGroup>

  <PropertyGroup Condition=" '$(HelixAccessToken)' == '' ">
    <IsExternal>true</IsExternal>
    <Creator>$(BUILD_SOURCEVERSIONAUTHOR)</Creator>
    <Creator Condition=" '$(Creator)' == '' ">anon</Creator>
  </PropertyGroup>

  <!-- Useless stuff to make Arcade SDK happy -->
  <PropertyGroup>
    <Language>msbuild</Language>
  </PropertyGroup>

  <Target Name="Pack"/>

  <Import Sdk="Microsoft.DotNet.Helix.Sdk" Project="Sdk.targets"/>
</Project>
